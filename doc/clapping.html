<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>A Musical Introduction to Generators</title>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">A Musical Introduction to Generators</h1>



<p>What a generator allows you to do is to take code that is writen in a sequential, looping style, and then treat that code’s output as a collection to be iterated over.</p>
<p>To illustrate what this means, and the generators package in general, I will use R to perform a suitable piece of music, specifically Steve Reich’s “Clapping Music.”</p>
<p>The piece starts with a loop counting out groups of 3, 2, 1, 2, 3, 2, 1, 2, 3… with each group separated by one rest. This adds up to a 12-note loop:</p>
<div class="figure">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjEwNjIuOTlweCIgaGVpZ2h0PSIzNTQuMzMxcHgiIHZpZXdCb3g9IjAgMCAxMDYyLjk5IDM1NC4zMzEiCiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjIiIGJhc2VQcm9maWxlPSJ0aW55Ij4KPHRpdGxlPkNsYXBwaW5nX211c2ljPC90aXRsZT4KPGRlc2M+R2VuZXJhdGVkIGJ5IE11c2VTY29yZSAzLjMuNDwvZGVzYz4KPHBvbHlsaW5lIGNsYXNzPSJTdGFmZkxpbmVzIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMi4wMCIgc3Ryb2tlLWxpbmVqb2luPSJiZXZlbCIgcG9pbnRzPSI5OS4yMTI2LDE3NS4wMTEgOTYzLjc4LDE3NS4wMTEiLz4KPHBvbHlsaW5lIGNsYXNzPSJCYXJMaW5lIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMTIuNTAiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiIHBvaW50cz0iMTYyLjk2NywxMjQuMDA4IDE2Mi45NjcsMjI2LjAxNCIvPgo8cG9seWxpbmUgY2xhc3M9IkJhckxpbmUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSI0LjAwIiBzdHJva2UtbGluZWpvaW49ImJldmVsIiBwb2ludHM9IjE4MS4yMTgsMTI0LjAwOCAxODEuMjE4LDIyNi4wMTQiLz4KPHBhdGggY2xhc3M9IkJhckxpbmUiIGQ9Ik0xOTIuOTU3LDE2Ni41MTUgQzE5MS44NSwxNjUuNDA4IDE5MS4yOTcsMTY0LjA3NCAxOTEuMjk3LDE2Mi41MTEgQzE5MS4yOTcsMTYwLjk0OSAxOTEuODUsMTU5LjYxNCAxOTIuOTU3LDE1OC41MDcgQzE5NC4wNjMsMTU3LjQgMTk1LjM5OCwxNTYuODQ3IDE5Ni45NjEsMTU2Ljg0NyBDMTk4LjUyMywxNTYuODQ3IDE5OS44NTgsMTU3LjQgMjAwLjk2NCwxNTguNTA3IEMyMDIuMDcxLDE1OS42MTQgMjAyLjYyNSwxNjAuOTQ5IDIwMi42MjUsMTYyLjUxMSBDMjAyLjYyNSwxNjQuMDc0IDIwMi4wNzEsMTY1LjQwOCAyMDAuOTY0LDE2Ni41MTUgQzE5OS44NTgsMTY3LjYyMiAxOTguNTIzLDE2OC4xNzUgMTk2Ljk2MSwxNjguMTc1IEMxOTUuMzk4LDE2OC4xNzUgMTk0LjA2MywxNjcuNjIyIDE5Mi45NTcsMTY2LjUxNSIvPgo8cGF0aCBjbGFzcz0iQmFyTGluZSIgZD0iTTE5Mi45NTcsMTkxLjUxNyBDMTkxLjg1LDE5MC40MSAxOTEuMjk3LDE4OS4wNzUgMTkxLjI5NywxODcuNTEzIEMxOTEuMjk3LDE4NS45NSAxOTEuODUsMTg0LjYxNSAxOTIuOTU3LDE4My41MDkgQzE5NC4wNjMsMTgyLjQwMiAxOTUuMzk4LDE4MS44NDkgMTk2Ljk2MSwxODEuODQ5IEMxOTguNTIzLDE4MS44NDkgMTk5Ljg1OCwxODIuNDAyIDIwMC45NjQsMTgzLjUwOSBDMjAyLjA3MSwxODQuNjE1IDIwMi42MjUsMTg1Ljk1IDIwMi42MjUsMTg3LjUxMyBDMjAyLjYyNSwxODkuMDc1IDIwMi4wNzEsMTkwLjQxIDIwMC45NjQsMTkxLjUxNyBDMTk5Ljg1OCwxOTIuNjIzIDE5OC41MjMsMTkzLjE3NyAxOTYuOTYxLDE5My4xNzcgQzE5NS4zOTgsMTkzLjE3NyAxOTQuMDYzLDE5Mi42MjMgMTkyLjk1NywxOTEuNTE3Ii8+CjxwYXRoIGNsYXNzPSJCYXJMaW5lIiBkPSJNOTE5LjUyMywxNjYuNTE1IEM5MTguNDE2LDE2NS40MDggOTE3Ljg2MywxNjQuMDc0IDkxNy44NjMsMTYyLjUxMSBDOTE3Ljg2MywxNjAuOTQ5IDkxOC40MTYsMTU5LjYxNCA5MTkuNTIzLDE1OC41MDcgQzkyMC42MywxNTcuNCA5MjEuOTY0LDE1Ni44NDcgOTIzLjUyNywxNTYuODQ3IEM5MjUuMDg5LDE1Ni44NDcgOTI2LjQyNCwxNTcuNCA5MjcuNTMxLDE1OC41MDcgQzkyOC42MzgsMTU5LjYxNCA5MjkuMTkxLDE2MC45NDkgOTI5LjE5MSwxNjIuNTExIEM5MjkuMTkxLDE2NC4wNzQgOTI4LjYzOCwxNjUuNDA4IDkyNy41MzEsMTY2LjUxNSBDOTI2LjQyNCwxNjcuNjIyIDkyNS4wODksMTY4LjE3NSA5MjMuNTI3LDE2OC4xNzUgQzkyMS45NjQsMTY4LjE3NSA5MjAuNjMsMTY3LjYyMiA5MTkuNTIzLDE2Ni41MTUiLz4KPHBhdGggY2xhc3M9IkJhckxpbmUiIGQ9Ik05MTkuNTIzLDE5MS41MTcgQzkxOC40MTYsMTkwLjQxIDkxNy44NjMsMTg5LjA3NSA5MTcuODYzLDE4Ny41MTMgQzkxNy44NjMsMTg1Ljk1IDkxOC40MTYsMTg0LjYxNSA5MTkuNTIzLDE4My41MDkgQzkyMC42MywxODIuNDAyIDkyMS45NjQsMTgxLjg0OSA5MjMuNTI3LDE4MS44NDkgQzkyNS4wODksMTgxLjg0OSA5MjYuNDI0LDE4Mi40MDIgOTI3LjUzMSwxODMuNTA5IEM5MjguNjM4LDE4NC42MTUgOTI5LjE5MSwxODUuOTUgOTI5LjE5MSwxODcuNTEzIEM5MjkuMTkxLDE4OS4wNzUgOTI4LjYzOCwxOTAuNDEgOTI3LjUzMSwxOTEuNTE3IEM5MjYuNDI0LDE5Mi42MjMgOTI1LjA4OSwxOTMuMTc3IDkyMy41MjcsMTkzLjE3NyBDOTIxLjk2NCwxOTMuMTc3IDkyMC42MywxOTIuNjIzIDkxOS41MjMsMTkxLjUxNyIvPgo8cG9seWxpbmUgY2xhc3M9IkJhckxpbmUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSI0LjAwIiBzdHJva2UtbGluZWpvaW49ImJldmVsIiBwb2ludHM9IjkzOS4yNzgsMTI0LjAwOCA5MzkuMjc4LDIyNi4wMTQiLz4KPHBvbHlsaW5lIGNsYXNzPSJCYXJMaW5lIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMTIuNTAiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiIHBvaW50cz0iOTU3LjUyOSwxMjQuMDA4IDk1Ny41MjksMjI2LjAxNCIvPgo8cG9seWxpbmUgY2xhc3M9IlN0ZW0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzLjI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiIHBvaW50cz0iMjY2Ljc2MiwxNzkuNzA3IDI2Ni43NjIsMjUwLjAxNiIvPgo8cG9seWxpbmUgY2xhc3M9IlN0ZW0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzLjI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiIHBvaW50cz0iMzIwLjgzNSwxNzkuNzA3IDMyMC44MzUsMjUwLjAxNiIvPgo8cG9seWxpbmUgY2xhc3M9IlN0ZW0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzLjI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiIHBvaW50cz0iMzc0LjkwOSwxNzkuNzA3IDM3NC45MDksMjUwLjAxNiIvPgo8cG9seWxpbmUgY2xhc3M9IlN0ZW0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzLjI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiIHBvaW50cz0iNDgzLjA1NiwxNzkuNzA3IDQ4My4wNTYsMjUwLjAxNiIvPgo8cG9seWxpbmUgY2xhc3M9IlN0ZW0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzLjI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiIHBvaW50cz0iNTM3LjEyOSwxNzkuNzA3IDUzNy4xMjksMjUwLjAxNiIvPgo8cG9seWxpbmUgY2xhc3M9IlN0ZW0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzLjI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiIHBvaW50cz0iNjQ1LjI3NiwxNzkuNzA3IDY0NS4yNzYsMjYyLjUxNyIvPgo8cG9seWxpbmUgY2xhc3M9IlN0ZW0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzLjI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiIHBvaW50cz0iNzUzLjQyMywxNzkuNzA3IDc1My40MjMsMjUwLjAxNiIvPgo8cG9seWxpbmUgY2xhc3M9IlN0ZW0iIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIzLjI1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0iYmV2ZWwiIHBvaW50cz0iODA3LjQ5NywxNzkuNzA3IDgwNy40OTcsMjUwLjAxNiIvPgo8cGF0aCBjbGFzcz0iTm90ZSIgZD0iTTI4Ny4xMDksMTYxLjI0MSBDMjkwLjIzNCwxNjEuMjQxIDI5Mi44NzEsMTYyLjA1NSAyOTUuMDIsMTYzLjY4MyBDMjk3LjAzOCwxNjUuNDQxIDI5OC4wNDcsMTY3LjY1NCAyOTguMDQ3LDE3MC4zMjQgQzI5OC4wNDcsMTc0LjgxNiAyOTUuNzM2LDE3OS4wMTUgMjkxLjExMywxODIuOTIxIEMyODYuNDI2LDE4Ni44MjcgMjgxLjQxMywxODguNzgxIDI3Ni4wNzQsMTg4Ljc4MSBDMjcyLjk0OSwxODguNzgxIDI3MC4zMTMsMTg3Ljk2NyAyNjguMTY0LDE4Ni4zMzkgQzI2Ni4xNDYsMTg0LjU4MSAyNjUuMTM3LDE4Mi4zNjggMjY1LjEzNywxNzkuNjk5IEMyNjUuMTM3LDE3NS4yMDYgMjY3LjQ4MSwxNzEuMDA3IDI3Mi4xNjgsMTY3LjEwMSBDMjc2LjcyNSwxNjMuMTk1IDI4MS43MDYsMTYxLjI0MSAyODcuMTA5LDE2MS4yNDEiLz4KPHBhdGggY2xhc3M9Ik5vdGUiIGQ9Ik0zNDEuMTgzLDE2MS4yNDEgQzM0NC4zMDgsMTYxLjI0MSAzNDYuOTQ1LDE2Mi4wNTUgMzQ5LjA5MywxNjMuNjgzIEMzNTEuMTExLDE2NS40NDEgMzUyLjEyLDE2Ny42NTQgMzUyLjEyLDE3MC4zMjQgQzM1Mi4xMiwxNzQuODE2IDM0OS44MDksMTc5LjAxNSAzNDUuMTg3LDE4Mi45MjEgQzM0MC40OTksMTg2LjgyNyAzMzUuNDg2LDE4OC43ODEgMzMwLjE0OCwxODguNzgxIEMzMjcuMDIzLDE4OC43ODEgMzI0LjM4NiwxODcuOTY3IDMyMi4yMzgsMTg2LjMzOSBDMzIwLjIxOSwxODQuNTgxIDMxOS4yMSwxODIuMzY4IDMxOS4yMSwxNzkuNjk5IEMzMTkuMjEsMTc1LjIwNiAzMjEuNTU0LDE3MS4wMDcgMzI2LjI0MiwxNjcuMTAxIEMzMzAuNzk5LDE2My4xOTUgMzM1Ljc3OSwxNjEuMjQxIDM0MS4xODMsMTYxLjI0MSIvPgo8cGF0aCBjbGFzcz0iTm90ZSIgZD0iTTM5NS4yNTYsMTYxLjI0MSBDMzk4LjM4MSwxNjEuMjQxIDQwMS4wMTgsMTYyLjA1NSA0MDMuMTY3LDE2My42ODMgQzQwNS4xODUsMTY1LjQ0MSA0MDYuMTk0LDE2Ny42NTQgNDA2LjE5NCwxNzAuMzI0IEM0MDYuMTk0LDE3NC44MTYgNDAzLjg4MywxNzkuMDE1IDM5OS4yNiwxODIuOTIxIEMzOTQuNTczLDE4Ni44MjcgMzg5LjU2LDE4OC43ODEgMzg0LjIyMSwxODguNzgxIEMzODEuMDk2LDE4OC43ODEgMzc4LjQ2LDE4Ny45NjcgMzc2LjMxMSwxODYuMzM5IEMzNzQuMjkzLDE4NC41ODEgMzczLjI4NCwxODIuMzY4IDM3My4yODQsMTc5LjY5OSBDMzczLjI4NCwxNzUuMjA2IDM3NS42MjcsMTcxLjAwNyAzODAuMzE1LDE2Ny4xMDEgQzM4NC44NzIsMTYzLjE5NSAzODkuODUzLDE2MS4yNDEgMzk1LjI1NiwxNjEuMjQxIi8+CjxwYXRoIGNsYXNzPSJOb3RlIiBkPSJNNTAzLjQwMywxNjEuMjQxIEM1MDYuNTI4LDE2MS4yNDEgNTA5LjE2NSwxNjIuMDU1IDUxMS4zMTQsMTYzLjY4MyBDNTEzLjMzMiwxNjUuNDQxIDUxNC4zNDEsMTY3LjY1NCA1MTQuMzQxLDE3MC4zMjQgQzUxNC4zNDEsMTc0LjgxNiA1MTIuMDMsMTc5LjAxNSA1MDcuNDA3LDE4Mi45MjEgQzUwMi43MiwxODYuODI3IDQ5Ny43MDcsMTg4Ljc4MSA0OTIuMzY4LDE4OC43ODEgQzQ4OS4yNDMsMTg4Ljc4MSA0ODYuNjA3LDE4Ny45NjcgNDg0LjQ1OCwxODYuMzM5IEM0ODIuNDQsMTg0LjU4MSA0ODEuNDMxLDE4Mi4zNjggNDgxLjQzMSwxNzkuNjk5IEM0ODEuNDMxLDE3NS4yMDYgNDgzLjc3NCwxNzEuMDA3IDQ4OC40NjIsMTY3LjEwMSBDNDkzLjAxOSwxNjMuMTk1IDQ5OCwxNjEuMjQxIDUwMy40MDMsMTYxLjI0MSIvPgo8cGF0aCBjbGFzcz0iTm90ZSIgZD0iTTU1Ny40NzcsMTYxLjI0MSBDNTYwLjYwMiwxNjEuMjQxIDU2My4yMzksMTYyLjA1NSA1NjUuMzg3LDE2My42ODMgQzU2Ny40MDUsMTY1LjQ0MSA1NjguNDE0LDE2Ny42NTQgNTY4LjQxNCwxNzAuMzI0IEM1NjguNDE0LDE3NC44MTYgNTY2LjEwMywxNzkuMDE1IDU2MS40ODEsMTgyLjkyMSBDNTU2Ljc5MywxODYuODI3IDU1MS43OCwxODguNzgxIDU0Ni40NDIsMTg4Ljc4MSBDNTQzLjMxNywxODguNzgxIDU0MC42OCwxODcuOTY3IDUzOC41MzIsMTg2LjMzOSBDNTM2LjUxMywxODQuNTgxIDUzNS41MDQsMTgyLjM2OCA1MzUuNTA0LDE3OS42OTkgQzUzNS41MDQsMTc1LjIwNiA1MzcuODQ4LDE3MS4wMDcgNTQyLjUzNSwxNjcuMTAxIEM1NDcuMDkzLDE2My4xOTUgNTUyLjA3MywxNjEuMjQxIDU1Ny40NzcsMTYxLjI0MSIvPgo8cGF0aCBjbGFzcz0iTm90ZSIgZD0iTTY2NS42MjQsMTYxLjI0MSBDNjY4Ljc0OSwxNjEuMjQxIDY3MS4zODYsMTYyLjA1NSA2NzMuNTM0LDE2My42ODMgQzY3NS41NTIsMTY1LjQ0MSA2NzYuNTYxLDE2Ny42NTQgNjc2LjU2MSwxNzAuMzI0IEM2NzYuNTYxLDE3NC44MTYgNjc0LjI1LDE3OS4wMTUgNjY5LjYyOCwxODIuOTIxIEM2NjQuOTQsMTg2LjgyNyA2NTkuOTI3LDE4OC43ODEgNjU0LjU4OSwxODguNzgxIEM2NTEuNDY0LDE4OC43ODEgNjQ4LjgyNywxODcuOTY3IDY0Ni42NzksMTg2LjMzOSBDNjQ0LjY2LDE4NC41ODEgNjQzLjY1MSwxODIuMzY4IDY0My42NTEsMTc5LjY5OSBDNjQzLjY1MSwxNzUuMjA2IDY0NS45OTUsMTcxLjAwNyA2NTAuNjgyLDE2Ny4xMDEgQzY1NS4yNCwxNjMuMTk1IDY2MC4yMiwxNjEuMjQxIDY2NS42MjQsMTYxLjI0MSIvPgo8cGF0aCBjbGFzcz0iTm90ZSIgZD0iTTc3My43NzEsMTYxLjI0MSBDNzc2Ljg5NiwxNjEuMjQxIDc3OS41MzMsMTYyLjA1NSA3ODEuNjgxLDE2My42ODMgQzc4My42OTksMTY1LjQ0MSA3ODQuNzA4LDE2Ny42NTQgNzg0LjcwOCwxNzAuMzI0IEM3ODQuNzA4LDE3NC44MTYgNzgyLjM5NywxNzkuMDE1IDc3Ny43NzUsMTgyLjkyMSBDNzczLjA4NywxODYuODI3IDc2OC4wNzQsMTg4Ljc4MSA3NjIuNzM2LDE4OC43ODEgQzc1OS42MTEsMTg4Ljc4MSA3NTYuOTc0LDE4Ny45NjcgNzU0LjgyNiwxODYuMzM5IEM3NTIuODA3LDE4NC41ODEgNzUxLjc5OCwxODIuMzY4IDc1MS43OTgsMTc5LjY5OSBDNzUxLjc5OCwxNzUuMjA2IDc1NC4xNDIsMTcxLjAwNyA3NTguODI5LDE2Ny4xMDEgQzc2My4zODcsMTYzLjE5NSA3NjguMzY3LDE2MS4yNDEgNzczLjc3MSwxNjEuMjQxIi8+CjxwYXRoIGNsYXNzPSJOb3RlIiBkPSJNODI3Ljg0NCwxNjEuMjQxIEM4MzAuOTY5LDE2MS4yNDEgODMzLjYwNiwxNjIuMDU1IDgzNS43NTUsMTYzLjY4MyBDODM3Ljc3MywxNjUuNDQxIDgzOC43ODIsMTY3LjY1NCA4MzguNzgyLDE3MC4zMjQgQzgzOC43ODIsMTc0LjgxNiA4MzYuNDcxLDE3OS4wMTUgODMxLjg0OCwxODIuOTIxIEM4MjcuMTYxLDE4Ni44MjcgODIyLjE0OCwxODguNzgxIDgxNi44MDksMTg4Ljc4MSBDODEzLjY4NCwxODguNzgxIDgxMS4wNDgsMTg3Ljk2NyA4MDguODk5LDE4Ni4zMzkgQzgwNi44ODEsMTg0LjU4MSA4MDUuODcyLDE4Mi4zNjggODA1Ljg3MiwxNzkuNjk5IEM4MDUuODcyLDE3NS4yMDYgODA4LjIxNSwxNzEuMDA3IDgxMi45MDMsMTY3LjEwMSBDODE3LjQ2LDE2My4xOTUgODIyLjQ0MSwxNjEuMjQxIDgyNy44NDQsMTYxLjI0MSIvPgo8cGF0aCBjbGFzcz0iUmVzdCIgZD0iTTQzNC4zODgsMTU0LjUwMyBDNDM2LjI3NywxNTQuNTAzIDQzNy43MDksMTU1LjAyNCA0MzguNjg1LDE1Ni4wNjYgQzQzOS42NjIsMTU3LjIzOCA0NDAuMTgzLDE1OC4zNDQgNDQwLjI0OCwxNTkuMzg2IEM0NDAuMzc4LDE2MC4zNjMgNDQwLjcwNCwxNjEuNDY5IDQ0MS4yMjQsMTYyLjcwNiBDNDQxLjgxLDE2My43NDggNDQyLjU1OSwxNjQuMjY5IDQ0My40NzEsMTY0LjI2OSBDNDQ0LjE4NywxNjQuMjY5IDQ0NS4yNjEsMTYzLjQ1NSA0NDYuNjkzLDE2MS44MjcgQzQ0Ny45OTUsMTYwLjM5NSA0NDguOTM5LDE1OS4xMjYgNDQ5LjUyNSwxNTguMDE5IEM0NDkuODUxLDE1Ny4zNjggNDUwLjMwNiwxNTcuMDQyIDQ1MC44OTIsMTU3LjA0MiBMNDUwLjk5LDE1Ny4wNDIgQzQ1MS42NDEsMTU3LjEwNyA0NTIuMDk3LDE1Ny40MzMgNDUyLjM1NywxNTguMDE5IEw0NDAuMDUzLDIwMC4wMTEgQzQzOS40MDIsMjAwLjY2MiA0MzguNDksMjAwLjk4OCA0MzcuMzE4LDIwMC45ODggQzQzNi4xNDYsMjAwLjk4OCA0MzUuMjM1LDIwMC42NjIgNDM0LjU4NCwyMDAuMDExIEw0NDYuMzAzLDE2Ny4zOTQgQzQ0Mi4xMzYsMTY4Ljg5MSA0MzguNjIsMTY5LjY0IDQzNS43NTYsMTY5LjY0IEM0MzMuNDEyLDE2OS42NCA0MzEuMzk0LDE2OC44OTEgNDI5LjcwMSwxNjcuMzk0IEM0MjcuOTQzLDE2NS45NjIgNDI3LjA2NCwxNjQuMDc0IDQyNy4wNjQsMTYxLjczIEM0MjcuMDY0LDE1OS43MTIgNDI3Ljc4LDE1OC4wMTkgNDI5LjIxMywxNTYuNjUyIEM0MzAuNjQ1LDE1NS4yMTkgNDMyLjM3LDE1NC41MDMgNDM0LjM4OCwxNTQuNTAzIi8+CjxwYXRoIGNsYXNzPSJSZXN0IiBkPSJNNTk2LjYwOSwxNTQuNTAzIEM1OTguNDk3LDE1NC41MDMgNTk5LjkyOSwxNTUuMDI0IDYwMC45MDYsMTU2LjA2NiBDNjAxLjg4MiwxNTcuMjM4IDYwMi40MDMsMTU4LjM0NCA2MDIuNDY4LDE1OS4zODYgQzYwMi41OTksMTYwLjM2MyA2MDIuOTI0LDE2MS40NjkgNjAzLjQ0NSwxNjIuNzA2IEM2MDQuMDMxLDE2My43NDggNjA0Ljc4LDE2NC4yNjkgNjA1LjY5MSwxNjQuMjY5IEM2MDYuNDA3LDE2NC4yNjkgNjA3LjQ4MSwxNjMuNDU1IDYwOC45MTQsMTYxLjgyNyBDNjEwLjIxNiwxNjAuMzk1IDYxMS4xNiwxNTkuMTI2IDYxMS43NDYsMTU4LjAxOSBDNjEyLjA3MSwxNTcuMzY4IDYxMi41MjcsMTU3LjA0MiA2MTMuMTEzLDE1Ny4wNDIgTDYxMy4yMTEsMTU3LjA0MiBDNjEzLjg2MiwxNTcuMTA3IDYxNC4zMTcsMTU3LjQzMyA2MTQuNTc4LDE1OC4wMTkgTDYwMi4yNzMsMjAwLjAxMSBDNjAxLjYyMiwyMDAuNjYyIDYwMC43MTEsMjAwLjk4OCA1OTkuNTM5LDIwMC45ODggQzU5OC4zNjcsMjAwLjk4OCA1OTcuNDU1LDIwMC42NjIgNTk2LjgwNCwyMDAuMDExIEw2MDguNTIzLDE2Ny4zOTQgQzYwNC4zNTYsMTY4Ljg5MSA2MDAuODQxLDE2OS42NCA1OTcuOTc2LDE2OS42NCBDNTk1LjYzMiwxNjkuNjQgNTkzLjYxNCwxNjguODkxIDU5MS45MjEsMTY3LjM5NCBDNTkwLjE2NCwxNjUuOTYyIDU4OS4yODUsMTY0LjA3NCA1ODkuMjg1LDE2MS43MyBDNTg5LjI4NSwxNTkuNzEyIDU5MC4wMDEsMTU4LjAxOSA1OTEuNDMzLDE1Ni42NTIgQzU5Mi44NjUsMTU1LjIxOSA1OTQuNTkxLDE1NC41MDMgNTk2LjYwOSwxNTQuNTAzIi8+CjxwYXRoIGNsYXNzPSJSZXN0IiBkPSJNNzA0Ljc1NiwxNTQuNTAzIEM3MDYuNjQ0LDE1NC41MDMgNzA4LjA3NiwxNTUuMDI0IDcwOS4wNTMsMTU2LjA2NiBDNzEwLjAyOSwxNTcuMjM4IDcxMC41NSwxNTguMzQ0IDcxMC42MTUsMTU5LjM4NiBDNzEwLjc0NiwxNjAuMzYzIDcxMS4wNzEsMTYxLjQ2OSA3MTEuNTkyLDE2Mi43MDYgQzcxMi4xNzgsMTYzLjc0OCA3MTIuOTI3LDE2NC4yNjkgNzEzLjgzOCwxNjQuMjY5IEM3MTQuNTU0LDE2NC4yNjkgNzE1LjYyOCwxNjMuNDU1IDcxNy4wNjEsMTYxLjgyNyBDNzE4LjM2MywxNjAuMzk1IDcxOS4zMDcsMTU5LjEyNiA3MTkuODkzLDE1OC4wMTkgQzcyMC4yMTgsMTU3LjM2OCA3MjAuNjc0LDE1Ny4wNDIgNzIxLjI2LDE1Ny4wNDIgTDcyMS4zNTgsMTU3LjA0MiBDNzIyLjAwOSwxNTcuMTA3IDcyMi40NjQsMTU3LjQzMyA3MjIuNzI1LDE1OC4wMTkgTDcxMC40MiwyMDAuMDExIEM3MDkuNzY5LDIwMC42NjIgNzA4Ljg1OCwyMDAuOTg4IDcwNy42ODYsMjAwLjk4OCBDNzA2LjUxNCwyMDAuOTg4IDcwNS42MDIsMjAwLjY2MiA3MDQuOTUxLDIwMC4wMTEgTDcxNi42NywxNjcuMzk0IEM3MTIuNTAzLDE2OC44OTEgNzA4Ljk4OCwxNjkuNjQgNzA2LjEyMywxNjkuNjQgQzcwMy43NzksMTY5LjY0IDcwMS43NjEsMTY4Ljg5MSA3MDAuMDY4LDE2Ny4zOTQgQzY5OC4zMTEsMTY1Ljk2MiA2OTcuNDMyLDE2NC4wNzQgNjk3LjQzMiwxNjEuNzMgQzY5Ny40MzIsMTU5LjcxMiA2OTguMTQ4LDE1OC4wMTkgNjk5LjU4LDE1Ni42NTIgQzcwMS4wMTIsMTU1LjIxOSA3MDIuNzM4LDE1NC41MDMgNzA0Ljc1NiwxNTQuNTAzIi8+CjxwYXRoIGNsYXNzPSJSZXN0IiBkPSJNODY2Ljk3NiwxNTQuNTAzIEM4NjguODY0LDE1NC41MDMgODcwLjI5NywxNTUuMDI0IDg3MS4yNzMsMTU2LjA2NiBDODcyLjI1LDE1Ny4yMzggODcyLjc3MSwxNTguMzQ0IDg3Mi44MzYsMTU5LjM4NiBDODcyLjk2NiwxNjAuMzYzIDg3My4yOTIsMTYxLjQ2OSA4NzMuODEyLDE2Mi43MDYgQzg3NC4zOTgsMTYzLjc0OCA4NzUuMTQ3LDE2NC4yNjkgODc2LjA1OSwxNjQuMjY5IEM4NzYuNzc1LDE2NC4yNjkgODc3Ljg0OSwxNjMuNDU1IDg3OS4yODEsMTYxLjgyNyBDODgwLjU4MywxNjAuMzk1IDg4MS41MjcsMTU5LjEyNiA4ODIuMTEzLDE1OC4wMTkgQzg4Mi40MzksMTU3LjM2OCA4ODIuODk0LDE1Ny4wNDIgODgzLjQ4LDE1Ny4wNDIgTDg4My41NzgsMTU3LjA0MiBDODg0LjIyOSwxNTcuMTA3IDg4NC42ODUsMTU3LjQzMyA4ODQuOTQ1LDE1OC4wMTkgTDg3Mi42NDEsMjAwLjAxMSBDODcxLjk4OSwyMDAuNjYyIDg3MS4wNzgsMjAwLjk4OCA4NjkuOTA2LDIwMC45ODggQzg2OC43MzQsMjAwLjk4OCA4NjcuODIzLDIwMC42NjIgODY3LjE3MiwyMDAuMDExIEw4NzguODkxLDE2Ny4zOTQgQzg3NC43MjQsMTY4Ljg5MSA4NzEuMjA4LDE2OS42NCA4NjguMzQ0LDE2OS42NCBDODY2LDE2OS42NCA4NjMuOTgyLDE2OC44OTEgODYyLjI4OSwxNjcuMzk0IEM4NjAuNTMxLDE2NS45NjIgODU5LjY1MiwxNjQuMDc0IDg1OS42NTIsMTYxLjczIEM4NTkuNjUyLDE1OS43MTIgODYwLjM2OCwxNTguMDE5IDg2MS44MDEsMTU2LjY1MiBDODYzLjIzMywxNTUuMjE5IDg2NC45NTgsMTU0LjUwMyA4NjYuOTc2LDE1NC41MDMiLz4KPHBhdGggY2xhc3M9IkJlYW0iIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTI2NS4xMzcsMjQzLjc2NSBMMzc2LjUzNCwyNDMuNzY1IEwzNzYuNTM0LDI1Ni4yNjYgTDI2NS4xMzcsMjU2LjI2NiBMMjY1LjEzNywyNDMuNzY1ICIvPgo8cGF0aCBjbGFzcz0iQmVhbSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNDgxLjQzMSwyNDMuNzY1IEw1MzguNzU0LDI0My43NjUgTDUzOC43NTQsMjU2LjI2NiBMNDgxLjQzMSwyNTYuMjY2IEw0ODEuNDMxLDI0My43NjUgIi8+CjxwYXRoIGNsYXNzPSJCZWFtIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03NTEuNzk4LDI0My43NjUgTDgwOS4xMjIsMjQzLjc2NSBMODA5LjEyMiwyNTYuMjY2IEw3NTEuNzk4LDI1Ni4yNjYgTDc1MS43OTgsMjQzLjc2NSAiLz4KPHBhdGggY2xhc3M9Ikhvb2siIGQ9Ik02NjYuNDA1LDE5MC4xNTMgQzY2Ny45MDMsMTkwLjE1MyA2NjkuNDk4LDE5Mi41OTUgNjcxLjE5LDE5Ny40NzcgQzY3Mi44MTgsMjAyLjI5NSA2NzMuNjMyLDIwNi44ODUgNjczLjYzMiwyMTEuMjQ3IEM2NzMuNjMyLDIxNC45NTggNjcyLjcyLDIxOC42MzYgNjcwLjg5NywyMjIuMjgyIEM2NjkuMDA5LDIyNi4xODggNjY2Ljc2MywyMjkuNTc0IDY2NC4xNTksMjMyLjQzOCBMNjU2LjE1MSwyNDEuNDIzIEM2NTMuNjc3LDI0NC4yODcgNjUxLjQ2NCwyNDcuNjA4IDY0OS41MTEsMjUxLjM4NCBDNjQ3LjY4OCwyNTUuMDMgNjQ2Ljc3NiwyNTguNzQgNjQ2Ljc3NiwyNjIuNTE3IEw2NDMuNjUxLDI2Mi41MTcgTDY0My42NTEsMjM3LjUxNyBMNjQ2Ljc3NiwyMzcuNTE3IEM2NDguNTM0LDIzNi40MSA2NTEuMTM4LDIzNC42NTIgNjU0LjU4OSwyMzIuMjQzIEM2NTYuMTUxLDIzMS4wNzEgNjU4LjQ5NSwyMjkuMTE4IDY2MS42MiwyMjYuMzg0IEM2NjQuMTU5LDIyNC4wNCA2NjYuMDgsMjIxLjYzMSA2NjcuMzgyLDIxOS4xNTcgQzY2OC43NDksMjE2LjU1MyA2NjkuNDMyLDIxMy45MTYgNjY5LjQzMiwyMTEuMjQ3IEM2NjkuNDMyLDIwNS4wNjIgNjY3LjY0MiwxOTguOTEgNjY0LjA2MSwxOTIuNzkgQzY2NC4wNjEsMTkyLjc5IDY2NC4wNjEsMTkyLjY2IDY2NC4wNjEsMTkyLjM5OSBDNjY0LjA2MSwxOTEuODEzIDY2NC4yNTcsMTkxLjMyNSA2NjQuNjQ3LDE5MC45MzUgQzY2NS4xNjgsMTkwLjQxNCA2NjUuNzU0LDE5MC4xNTMgNjY2LjQwNSwxOTAuMTUzIi8+Cjwvc3ZnPgo=" alt="Musical score showing loop" />
<p class="caption">Musical score showing loop</p>
</div>
<p>In code, we could implement that idea like the following, printing a <code>1</code> for each clap and a <code>0</code> for each rest:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">print_pattern &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">counts =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">repeats=</span><span class="dv">4</span>) {</a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_len</span>(repeats)) {</a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="cf">for</span> (c <span class="cf">in</span> counts) {</a>
<a class="sourceLine" id="cb1-4" title="4">        <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>c)</a>
<a class="sourceLine" id="cb1-5" title="5">          <span class="kw">cat</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1-6" title="6">        <span class="kw">cat</span>(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb1-7" title="7">    }</a>
<a class="sourceLine" id="cb1-8" title="8">  }</a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="kw">cat</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb1-10" title="10">}</a></code></pre></div>
<p>Testing this, we should see groups of 1, 2, or 3 <code>1</code>s separated by a single <code>0</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">print_pattern</span>(<span class="dt">repeats=</span><span class="dv">4</span>);</a></code></pre></div>
<pre><code>## 111011010110111011010110111011010110111011010110</code></pre>
<p>“Clapping Music” is based on manipulating this 12-count loop. But it’s hard to manipulate the output of a program that only prints. The calls to <code>cat</code> produce output on the terminal, but they don’t produce data that we can easily manipulate with more programming – we need to make this pattern into data, rather than terminal output.</p>
<p>The <code>async</code> package allows us to enclose a data-generating process into an object.</p>
<p>To make a generator for this pattern, we just enclose the body of the function in a call to <code>gen()</code>, and change each <code>cat()</code> to <code>yield()</code>. We can also move the outer loop into the <code>recycle</code> argument of an [iteror].</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">library</span>(async)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">library</span>(iterors)</a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;iterors&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:async&#39;:
## 
##     collect</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">counts &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-2" title="2">pattern &lt;-<span class="st"> </span><span class="kw">gen</span>({</a>
<a class="sourceLine" id="cb7-3" title="3">  <span class="cf">repeat</span> {</a>
<a class="sourceLine" id="cb7-4" title="4">    <span class="cf">for</span> (n <span class="cf">in</span> counts) {</a>
<a class="sourceLine" id="cb7-5" title="5">      <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n)</a>
<a class="sourceLine" id="cb7-6" title="6">        <span class="kw">yield</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-7" title="7">      <span class="kw">yield</span>(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb7-8" title="8">    }</a>
<a class="sourceLine" id="cb7-9" title="9">  }</a>
<a class="sourceLine" id="cb7-10" title="10">})</a></code></pre></div>
<p>The code inside <code>gen(...)</code> does not run, yet. The call to <code>gen</code> constructs an [iteror][]. Iteror is an implementation of iterators defined in the async package; its objects are cross compatible with the established <code>iterators</code> package but can have somewhat better performance. The main method for an iteror is <code>nextOr(x, or)</code> where the second argument specifies what to do to signal the end of iteration. So we can get out our pattern like this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">24</span>) {</a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="kw">cat</span>(<span class="kw">nextOr</span>(pattern, <span class="cf">break</span>))</a>
<a class="sourceLine" id="cb8-3" title="3">}</a></code></pre></div>
<pre><code>## 111011010110111011010110</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">cat</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a></code></pre></div>
<p>When <code>nextOr()</code> is called on a generator, the generator runs its code only up to where <code>yield</code> is called. The generator returns this value, and saves its state, pausing until the next call to <code>nextOr()</code>.</p>
<p>We’ll have to create a few copies of this kind of generator, so we can reuse it by making a function. You can wrap <code>gen</code> around a function expression; this will define a <em>generator function</em> (a function that constructs a generator.)</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">gen_pattern &lt;-<span class="st"> </span><span class="kw">gen</span>(<span class="cf">function</span>(<span class="dt">counts =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>)) {</a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="cf">repeat</span> {</a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="cf">for</span> (n <span class="cf">in</span> counts) {</a>
<a class="sourceLine" id="cb11-4" title="4">      <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n)</a>
<a class="sourceLine" id="cb11-5" title="5">        <span class="kw">yield</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb11-6" title="6">      <span class="kw">yield</span>(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb11-7" title="7">    }</a>
<a class="sourceLine" id="cb11-8" title="8">  }</a>
<a class="sourceLine" id="cb11-9" title="9">})</a></code></pre></div>
<p>Because <code>gen(...)</code> builds an [iteror][], you you can apply iteror methods to it. For instance you can collect just the first 24 items with <code>ilimit()</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">show_head &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">n=</span><span class="dv">24</span>) {</a>
<a class="sourceLine" id="cb12-2" title="2">  x <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">as.list</span>(<span class="dt">n=</span>n) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">deparse</span>() <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">cat</span>(<span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb12-3" title="3">}</a>
<a class="sourceLine" id="cb12-4" title="4"><span class="kw">show_head</span>(<span class="kw">gen_pattern</span>(), <span class="dv">24</span>)</a></code></pre></div>
<pre><code>## list(1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 
##     1, 0, 1, 1, 0)</code></pre>
<div id="making-noise" class="section level2">
<h2>Making noise</h2>
<p>We’re a good way into what I advertised as a musical endeavour and haven’t made any sounds yet. First let’s download some handclap samples. I located some on GitHub:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">tmp &lt;-<span class="st"> </span><span class="kw">tempdir</span>()</a>
<a class="sourceLine" id="cb14-2" title="2">baseurl &lt;-<span class="st"> &quot;https://github.com/octoblu/drum-kit/raw/master/public/assets/samples&quot;</span></a>
<a class="sourceLine" id="cb14-3" title="3">samplepaths &lt;-<span class="st"> </span><span class="kw">paste0</span>(tmp, <span class="kw">c</span>(<span class="st">&quot;x&quot;</span> =<span class="st"> &quot;/clap4.wav&quot;</span>,<span class="st">&quot;X&quot;</span> =<span class="st"> &quot;/clap5.wav&quot;</span>))</a>
<a class="sourceLine" id="cb14-4" title="4">curl<span class="op">::</span><span class="kw">curl_download</span>(<span class="kw">paste0</span>(baseurl, <span class="st">&quot;/clap%20(4).WAV&quot;</span>), samplepaths[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb14-5" title="5">curl<span class="op">::</span><span class="kw">curl_download</span>(<span class="kw">paste0</span>(baseurl, <span class="st">&quot;/clap%20(5).WAV&quot;</span>), samplepaths[<span class="dv">2</span>])</a></code></pre></div>
<p>Although R is not really known for audio performance, there is an <code>audio</code> package playing sound samples, which we can use like this:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">library</span>(audio) <span class="co"># for load.wave, play</span></a>
<a class="sourceLine" id="cb15-2" title="2">claps &lt;-<span class="st"> </span><span class="kw">lapply</span>(samplepaths, load.wave)</a>
<a class="sourceLine" id="cb15-3" title="3"><span class="kw">play</span>(claps[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb15-4" title="4"><span class="kw">play</span>(claps[[<span class="dv">2</span>]])</a></code></pre></div>
<p>We want to play sounds at a consistent tempo, so here’s a routine that takes in a generator and a sample list, and plays at a given tempo. The <code>profvis</code> package has a <code>pause</code> function that’s more accurate than <code>Sys.sleep()</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">library</span>(profvis) <span class="co"># for pause</span></a>
<a class="sourceLine" id="cb16-2" title="2">iplay &lt;-<span class="st"> </span><span class="cf">function</span>(g, samples, bpm) {</a>
<a class="sourceLine" id="cb16-3" title="3">  interval &lt;-<span class="st"> </span><span class="dv">60</span> <span class="op">/</span><span class="st"> </span>bpm</a>
<a class="sourceLine" id="cb16-4" title="4">  target &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</a>
<a class="sourceLine" id="cb16-5" title="5">    <span class="cf">repeat</span> {</a>
<a class="sourceLine" id="cb16-6" title="6">      x &lt;-<span class="st"> </span><span class="kw">nextOr</span>(g, <span class="cf">break</span>)</a>
<a class="sourceLine" id="cb16-7" title="7">      target &lt;-<span class="st"> </span>target <span class="op">+</span><span class="st"> </span>interval</a>
<a class="sourceLine" id="cb16-8" title="8">      <span class="cf">while</span>({now &lt;-<span class="st"> </span><span class="kw">Sys.time</span>(); <span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>now <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.15</span>})</a>
<a class="sourceLine" id="cb16-9" title="9">        <span class="kw">Sys.sleep</span>(target <span class="op">-</span><span class="st"> </span>now <span class="op">-</span><span class="st"> </span><span class="fl">0.15</span>)</a>
<a class="sourceLine" id="cb16-10" title="10">      <span class="cf">if</span> (<span class="kw">is.numeric</span>(x) <span class="op">&amp;&amp;</span><span class="st"> </span>x <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;&amp;</span><span class="st"> </span>x <span class="op">&lt;=</span><span class="st"> </span><span class="kw">length</span>(samples)) {</a>
<a class="sourceLine" id="cb16-11" title="11">        <span class="kw">cat</span>(x)</a>
<a class="sourceLine" id="cb16-12" title="12">        <span class="kw">pause</span>(target <span class="op">-</span><span class="st"> </span><span class="kw">Sys.time</span>())</a>
<a class="sourceLine" id="cb16-13" title="13">        <span class="kw">play</span>(samples[[x]])</a>
<a class="sourceLine" id="cb16-14" title="14">      } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb16-15" title="15">        <span class="kw">cat</span>(<span class="st">&quot;.&quot;</span>)</a>
<a class="sourceLine" id="cb16-16" title="16">      }</a>
<a class="sourceLine" id="cb16-17" title="17">    }</a>
<a class="sourceLine" id="cb16-18" title="18">}</a></code></pre></div>
<p>So we should hear our pattern now:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">gen_pattern</span>() <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">ilimit</span>(<span class="dv">36</span>) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">iplay</span>(claps, <span class="dv">360</span>)</a></code></pre></div>
<div id="some-iteror-iterator-functions" class="section level3">
<h3>Some iteror (iterator) functions</h3>
<p>The object constructed by <code>gen</code> has class <code>iteror</code>. Iterors are an iteration construct included in the companion package <code>iterors</code>. Iterors are cross compatible with iterators from the <code>iterators</code> package and its <code>nextElem</code> method, but using their preferred method <code>nextOr</code> can lead to better performance and more compact code.</p>
<p>We can work with generators using iteror methods. Here are two methods that will come in handy. One is an iteror equivalent of <code>lapply</code>, which I’ll call <code>iapply</code>. The other one is <code>isink</code> which just consumes and throws away all elements from an iteror.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">iapply &lt;-<span class="st"> </span><span class="cf">function</span>(it, f, ...) { <span class="kw">list</span>(it, f, ...)</a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="kw">iteror</span>(<span class="cf">function</span>(or) {</a>
<a class="sourceLine" id="cb18-3" title="3">    <span class="kw">f</span>(<span class="kw">nextOr</span>(it, <span class="kw">return</span>(or)), ...)</a>
<a class="sourceLine" id="cb18-4" title="4">  })</a>
<a class="sourceLine" id="cb18-5" title="5">}</a>
<a class="sourceLine" id="cb18-6" title="6"></a>
<a class="sourceLine" id="cb18-7" title="7">isink &lt;-<span class="st"> </span><span class="cf">function</span>(it, <span class="dt">then=</span><span class="kw">invisible</span>(<span class="ot">NULL</span>)) {</a>
<a class="sourceLine" id="cb18-8" title="8">  <span class="cf">repeat</span> <span class="kw">nextOr</span>(it, <span class="cf">break</span>)</a>
<a class="sourceLine" id="cb18-9" title="9">  then</a>
<a class="sourceLine" id="cb18-10" title="10">}</a></code></pre></div>
<p>Note that the second argument to <code>nextOr</code> is only lazily evaluated when the iterator terminates; this is what allows you to place control flow operators like <code>break</code>.</p>
<p>For example, we can print the contents of a generator by <code>iapply</code>ing <code>cat</code> and throwing away the results:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">g &lt;-<span class="st"> </span><span class="kw">gen_pattern</span>() <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">ilimit</span>(<span class="dv">24</span>) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">iapply</span>(cat) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">isink</span>(<span class="kw">cat</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>))</a></code></pre></div>
<pre><code>## 111011010110111011010110</code></pre>
</div>
<div id="some-iterator-functions-using-generators" class="section level3">
<h3>Some iterator functions, using generators</h3>
<p>Generators enjoy some syntax extensions over base R; one extension is that they can use a regular <code>for</code> loop with an iteror. So we can equivalently write the above <code>iapply</code> and <code>isink</code> using even more concise generator syntax.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">gapply &lt;-<span class="st"> </span><span class="kw">gen</span>(<span class="cf">function</span>(it, f, ...) <span class="cf">for</span> (x <span class="cf">in</span> it) <span class="kw">yield</span>(<span class="kw">f</span>(x, ...)) )</a>
<a class="sourceLine" id="cb21-2" title="2">gsink &lt;-<span class="st"> </span><span class="cf">function</span>(it, <span class="dt">then=</span><span class="ot">NULL</span>) {<span class="kw">run</span>(<span class="cf">for</span> (i <span class="cf">in</span> it) <span class="ot">NULL</span>); then}</a></code></pre></div>
<p>Here [run][] is like <code>gen</code>, except rather than constructing an iteror, <code>run</code> executes immediately, collecting all values passed to <code>yield</code> and returning a list. So <code>gsink</code> is a function that when called will consume all items from the iterator <code>it</code> before returning.</p>
</div>
</div>
<div id="phasing-and-combining" class="section level2">
<h2>Phasing and combining</h2>
<p>“Clapping Music” is a piece for two performers, who both play the same pattern, but after every 12 loops, one of the performers skips forward by one step. Over the course of the piece, the two parts move out and back into in phase with each other. We can write a generator function that does this “skip,” by consuming a value without yielding it:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">drop_one_after &lt;-<span class="st"> </span><span class="kw">gen</span>(<span class="cf">function</span>(g, n, <span class="dt">sep=</span><span class="kw">character</span>(<span class="dv">0</span>)) {</a>
<a class="sourceLine" id="cb22-2" title="2">  <span class="cf">repeat</span> {</a>
<a class="sourceLine" id="cb22-3" title="3">    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n) <span class="kw">yield</span>(<span class="kw">nextOr</span>(g, <span class="cf">break</span>))</a>
<a class="sourceLine" id="cb22-4" title="4">    <span class="kw">nextOr</span>(g, <span class="cf">break</span>) <span class="co">#drop</span></a>
<a class="sourceLine" id="cb22-5" title="5">    <span class="kw">cat</span>(sep) <span class="co"># print a seperator after every skip</span></a>
<a class="sourceLine" id="cb22-6" title="6">  }</a>
<a class="sourceLine" id="cb22-7" title="7">})</a></code></pre></div>
<p>Here’s what 12 loops look like, where you after three (i.e. skipping every fourth):</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">iseq</span>() <span class="op">|</span><span class="er">&gt;</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="kw">ilimit</span>(<span class="dv">12</span>) <span class="op">|</span><span class="er">&gt;</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="kw">drop_one_after</span>(<span class="dv">3</span>, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>) <span class="op">|</span><span class="er">&gt;</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="kw">iapply</span>(cat, <span class="st">&quot;&quot;</span>) <span class="op">|</span><span class="er">&gt;</span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="kw">isink</span>()</a></code></pre></div>
<pre><code>## 1 2 3 
## 5 6 7 
## 9 10 11</code></pre>
<p>The performance directions for “Clapping Music” request that the two performers should make their claps sound similar, so that their lines blend into an overall pattern. We can interpret that as combining the two lines by adding two generators, resulting in 0, 1, or 2 claps at every step, playing the louder sample for a value of 2.</p>
<p>Then, all together:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1">clapping_music &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">n=</span><span class="dv">12</span>, <span class="dt">counts=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="dt">sep=</span><span class="st">&quot; &quot;</span>) {</a>
<a class="sourceLine" id="cb25-2" title="2">  cell &lt;-<span class="st"> </span><span class="kw">sum</span>(counts<span class="op">+</span><span class="dv">1</span>) <span class="co"># how long?</span></a>
<a class="sourceLine" id="cb25-3" title="3">  a &lt;-<span class="st"> </span><span class="kw">gen_pattern</span>(counts)</a>
<a class="sourceLine" id="cb25-4" title="4">  b &lt;-<span class="st"> </span><span class="kw">gen_pattern</span>(counts) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">drop_one_after</span>(n<span class="op">*</span>cell, sep)</a>
<a class="sourceLine" id="cb25-5" title="5">  <span class="co"># add them together and limit the output</span></a>
<a class="sourceLine" id="cb25-6" title="6">  <span class="kw">gen</span>(<span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>(n<span class="op">*</span>(cell<span class="op">+</span><span class="dv">1</span>)<span class="op">*</span>cell)) {</a>
<a class="sourceLine" id="cb25-7" title="7">    x &lt;-<span class="st"> </span><span class="kw">nextOr</span>(a, <span class="cf">break</span>)</a>
<a class="sourceLine" id="cb25-8" title="8">    y &lt;-<span class="st"> </span><span class="kw">nextOr</span>(b, <span class="cf">break</span>)</a>
<a class="sourceLine" id="cb25-9" title="9">    <span class="kw">yield</span>(x<span class="op">+</span>y)</a>
<a class="sourceLine" id="cb25-10" title="10">  })</a>
<a class="sourceLine" id="cb25-11" title="11">}</a></code></pre></div>
<p>To narrate this: we are constructing two independent instances of our 12-note generator. One of these patterns is made to skip one beat every N bars. Then we create a third generator that adds together the two.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">clapping_music</span>(<span class="dv">4</span>, <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">iapply</span>(cat) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">isink</span>(<span class="kw">cat</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>))</a></code></pre></div>
<pre><code>## 222022020220222022020220222022020220222022020220
## 221121111211221121111211221121111211221121111211
## 212112021121212112021121212112021121212112021121
## 122021120221122021120221122021120221122021120221
## 221112111220221112111220221112111220221112111220
## 212022021211212022021211212022021211212022021211
## 121121121121121121121121121121121121121121121121
## 212112120220212112120220212112120220212112120220
## 122022111211122022111211122022111211122022111211
## 221122021120221122021120221122021120221122021120
## 212121120211212121120211212121120211212121120211
## 122112111121122112111121122112111121122112111121
## 222022020220222022020220222022020220222022020220</code></pre>
</div>
<div id="a-performance" class="section level2">
<h2>A performance</h2>
<p>Now we should be able to hear our performance:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">iplay</span>(<span class="kw">clapping_music</span>(<span class="dt">n=</span><span class="dv">4</span>, <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>), claps, <span class="dv">480</span>)</a></code></pre></div>
<p>It has to be said that R is not particularly built to be a multimedia environment, plus the <code>audio</code> package will be using the OS alert sound facility, which is typically not built for precise timing, so you may hear some glitches and hiccups. Nevertheless, I hope this has illustrated how generators allows control to be <em>interleaved</em> among different sequential processes.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
