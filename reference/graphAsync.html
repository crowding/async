<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Draw a graph representation of a coroutine. — graphAsync • async</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Draw a graph representation of a coroutine. — graphAsync"><meta property="og:description" content="graphAsync will traverse the objects representing a
generator or async and render a graph of its structure
using Graphviz (if it is installed.)"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">async</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/README.html">The `async` package: Generators, async/await, and asynchronous streams for R</a>
    </li>
    <li>
      <a href="../articles/clapping.html">A Musical Introduction to Generators</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/crowding/async/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Draw a graph representation of a coroutine.</h1>
    <small class="dont-index">Source: <a href="https://github.com/crowding/async/blob/HEAD/R/graph.R" class="external-link"><code>R/graph.R</code></a></small>
    <div class="hidden name"><code>graphAsync.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>graphAsync</code> will traverse the objects representing a
<a href="gen.html">generator</a> or <a href="async.html">async</a> and render a graph of its structure
using Graphviz (if it is installed.)</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">graphAsync</span><span class="op">(</span></span>
<span>  <span class="va">obj</span>,</span>
<span>  basename <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/name.html" class="external-link">is.name</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span><span class="op">)</span> <span class="kw">else</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Please specify basename"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"pdf"</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  envs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  vars <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  handlers <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  orphans <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dot <span class="op">=</span> <span class="fu">find_dot</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">basename</span>, <span class="st">"."</span>, <span class="va">type</span><span class="op">)</span>,</span>
<span>  dotfile <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"dot"</span><span class="op">)</span> <span class="va">filename</span> <span class="kw">else</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">basename</span>, <span class="st">".dot"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>obj</dt>
<dd><p>A <a href="gen.html">generator</a>, <a href="async.html">async</a> or <a href="stream.html">stream</a> object.</p></dd>


<dt>basename</dt>
<dd><p>The base file name. If <code>basename="X"</code> and
<code>type="pdf"</code> you will end up with two files, <code>"X.dot"</code> and
<code>"X.pdf"</code>.</p></dd>


<dt>type</dt>
<dd><p>the output format. If "dot", we will just write a
Graphviz dot file. If another extension like "pdf" or "svg", will
write a DOT file and then attempt to invoke Graphviz <code>dot</code> (if it
is available according to <code><a href="https://rdrr.io/r/base/Sys.which.html" class="external-link">Sys.which</a></code>) to produce the image.
If <code>type=""</code> <code>graphAsync</code> will return graphviz DOT language as a
character vector</p></dd>


<dt>...</dt>
<dd><p>Unused.</p></dd>


<dt>envs</dt>
<dd><p>If <code>TRUE</code>, multiple nodes that share the same
environment will be grouped together in clusters.</p></dd>


<dt>vars</dt>
<dd><p>If <code>TRUE</code>, context variables used in each state node
will be included on the graph, with edges indicating
reads/stores.</p></dd>


<dt>handlers</dt>
<dd><p>If <code>TRUE</code>, state nodes will have thin edges
connecting to trampoline handlers they call, in addition to the
dashed edges connecting to the next transition.</p></dd>


<dt>orphans</dt>
<dd><p>If <code>TRUE</code>, nodes will be included even if there are
no connections to them (this mostly being interface methods and
unused handlers).</p></dd>


<dt>dot</dt>
<dd><p>Optional path to the <code>dot</code> executable.</p></dd>


<dt>filename</dt>
<dd><p>Optionally specify the output picture file name.</p></dd>


<dt>dotfile</dt>
<dd><p>Optionally specify the output DOT file name.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>If <code>type=""</code>, a character vector of DOT source. Else
The name of the file that was created.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>graphAsync</code> will write a Graphviz DOT format file describing the
given <a href="gen.html">generator</a> or <a href="async.html">async</a>/await block. The graph shows the
generator as a state machine with nodes that connect to each other.</p>
<p>If <code>type</code> is something other than <code>dot</code> <code>graphAsync will then try to invoke Graphviz </code>dot` to turn the graph description into an image
file.</p>
<p>The green octagonal node is where the program starts, while red
"stop" and blue "return" are where it ends. Nodes in green type on
dark background show code that runs in the host language
unmodified; gray nodes implement control flow. Dark arrows carry a
value; gray edges carry no value. A "semicolon" node receives a
value and discards it.</p>
<p>Some nodes share a context with other nodes, shown by an enclosing
box. Contexts can have state variables, shown as a rectangular
record; orange edges from functions to variables represent writes;
blue edges represent reads.</p>
<p>Dashed edges represent a state transition that goes through a
trampoline handler. Dashed edges have a Unicode symbol representing
the type of trampoline; (DOUBLE VERTICAL BAR) for await/yield; (TOP
ARC ANTICLOCKWISE ARROW WITH PLUS) or (TOP ARC CLOCKWISE ARROW WITH
MINUS) to wind on or off an exception handler; (ANTICLOCKWISE
TRIANGLE-HEADED BOTTOM U-SHAPED ARROW) for a plain trampoline with
no side effects (done once per loop, to avoid overflowing the
stack.)  Meanwhile, a thin edge connects to the trampoline handler.
(So the user-facing "yield" function registers a continuation to
the next step but actually calls the generator's yield handler.)</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">randomWalk</span> <span class="op">&lt;-</span> <span class="fu"><a href="gen.html">gen</a></span><span class="op">(</span><span class="op">{</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">0</span>; <span class="kw">repeat</span> <span class="op">{</span><span class="fu"><a href="gen.html">yield</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>; <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">}</span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">graphAsync</span><span class="op">(</span><span class="va">randomWalk</span>, <span class="st">"pdf"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># writes "randomWalk.dot" and invokes dot to make "randomWalk.pdf"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#or, display it in an R window with the Rgraphviz package:</span></span></span>
<span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">Rgraphviz</span><span class="fu">::</span><span class="fu">agread</span><span class="op">(</span><span class="st">"randomWalk.dot"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">Rgraphviz</span><span class="fu">::</span><span class="fu">plot</span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co">#Or render an HTML sidget using DiagrammeR:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">dot</span> <span class="op">&lt;-</span> <span class="fu">graphAsync</span><span class="op">(</span><span class="va">randomWalk</span>, type<span class="op">=</span><span class="st">""</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">DiagrammeR</span><span class="fu">::</span><span class="fu">DiagrammeR</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dot</span>, collapse<span class="op">=</span><span class="st">"\n"</span><span class="op">)</span>, type<span class="op">=</span><span class="st">"grViz"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Peter Meilstrup.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

