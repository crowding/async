<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>An object representing a sequence of future values. — channel • async</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="An object representing a sequence of future values. — channel"><meta property="og:description" content="A channel is an object that represents a sequence of values yet
to be determined. It is something like a combination of a promise
and an iteror."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">async</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/README.html">The `async` package: Generators, async/await, and asynchronous streams for R</a>
    </li>
    <li>
      <a href="../articles/clapping.html">A Musical Introduction to Generators</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/crowding/async/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>An object representing a sequence of future values.</h1>
    <small class="dont-index">Source: <a href="https://github.com/crowding/async/blob/HEAD/R/channel.R" class="external-link"><code>R/channel.R</code></a></small>
    <div class="hidden name"><code>channel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A <code>channel</code> is an object that represents a sequence of values yet
to be determined. It is something like a combination of a <a href="https://rdrr.io/r/base/delayedAssign.html" class="external-link">promise</a>
and an <a href="iteror.html">iteror</a>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">channel</span><span class="op">(</span><span class="va">impl</span>, max_queue <span class="op">=</span> <span class="fl">500L</span>, max_awaiting <span class="op">=</span> <span class="fl">500L</span>, wakeup <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is.channel</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>impl</dt>
<dd><p>A user-provided function; it will receive three
callback functions as arguments, in order, <code>emit(val)</code>,
<code>reject(err)</code> and <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">close()</a></code></p></dd>


<dt>max_queue</dt>
<dd><p>The maximum number of outgoing values to store if
there are no listeners. Beyond this, calling <code>emit</code> will return
an error.</p></dd>


<dt>max_awaiting</dt>
<dd><p>The maximum number of pending requests. If
there are this many outstanding requests, for values, calling
<code>nextThen(ch, ...)</code> or <code>nextElem(ch)</code> will raise an error.</p></dd>


<dt>wakeup</dt>
<dd><p>You may optionally provide a callback function here.
It will be called when the queue is empty and there is at least
one listener/outstanding promise.</p></dd>


<dt>x</dt>
<dd><p>an object.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a channel object, supporting methods "nextThen" and "nextElem"</p>


<p><code>is.channel(x)</code> returns TRUE if its argument is a channel object.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The channel interface could be used to represent and work with data
coming in over a connection, data values being logged over time, a
queue of incoming requests, and things of that nature.</p>
<p>The friendly way to create a channel and use it in asynchronous
programming is to use a <a href="stream.html">stream</a> coroutine. Inside of <code><a href="stream.html">stream()</a></code>
call <a href="async.html">await</a> to wait on promises, <a href="awaitNext.html">awaitNext</a> to wait on other
streams and <a href="gen.html">yield</a> to yield values. To signal end of iteration
use <code><a href="https://rdrr.io/r/base/function.html" class="external-link">return()</a></code> (which will discard its value) and to signal an
error use <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code>.</p>
<p>The friendly way to consume values from a channel is to use
awaitNext within an <code>async</code> or <code>stream</code> coroutine.</p>
<p>The low-level interface to request values from a channel is to call
<a href="nextThen.html">nextThen</a><code>(ch, onNext=, onError=, onClose=)]</code>, providing callback
functions for at least <code>onNext(val)</code>. Those callbacks will be
appended to an internal queue, and will be called as soon as data
is available, in the order that requests were received.</p>
<p>You can also treat a channel as an <a href="iteror.html">iteror</a> over promises, calling
<code>nextOr(pri)</code> to return a <a href="https://rdrr.io/r/base/delayedAssign.html" class="external-link">promise</a> representing the next
available value. Each promise created this way will be resolved in
the order that data come in. Note that this way there is no special
signal for end of iteration; a promise will reject with
the sigil value <code>"StopIteration"</code> to signal end of iteration.</p>
<p>Be careful with the iterator-over-promises interface though: if you
call <code>as.list.iteror(pr)</code> you may get stuck in an infinite loop, as
<code>as.list</code> keeps calling <code>nextElem</code> and receives more promises to
represent values that exist only hypothetically. This is one
reason for the <code>max_listeners</code> limit.</p>
<p>The low-level interface to <em>create</em> a channel object is to call
<code>channel(function(emit, reject, cancel) {...})</code>, providing your own
function in its argument; your function will receive those three
callback methods as arguments. Then use whatever means to arrange
to call <code>emit(val)</code> some time in the future as data comes in. When
you are done emitting values, call the <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">close()</a></code> callback. To
report an error use the callback <code>reject(err)</code> The next requestor
will receive the error. If there is more than one listener, other
queued listeners will get a <code>close</code> signal.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Peter Meilstrup</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Peter Meilstrup.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

